{"openapi":"3.0.1","info":{"title":"Prisoner Offender Search","description":"API for providing Indexing and searching of offenders","contact":{"name":"HMPPS Digital Studio","email":"feedback@digital.justice.gov.uk"},"version":"2022-05-17.3519.c777aef"},"servers":[{"url":"https://prisoner-search-dev.prison.service.justice.gov.uk","description":"Development"},{"url":"https://prisoner-search-preprod.prison.service.justice.gov.uk","description":"PreProd"},{"url":"https://prisoner-search.prison.service.justice.gov.uk","description":"Prod"},{"url":"http://localhost:8080","description":"Local"}],"security":[{"bearer-jwt":["read","write"]}],"paths":{"/queue-admin/retry-dlq/{dlqName}":{"put":{"tags":["hmpps-queue-resource"],"operationId":"retryDlq","parameters":[{"name":"dlqName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RetryDlqResult"}}}}}}},"/queue-admin/retry-all-dlqs":{"put":{"tags":["hmpps-queue-resource"],"operationId":"retryAllDlqs","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RetryDlqResult"}}}}}}}},"/queue-admin/purge-queue/{queueName}":{"put":{"tags":["hmpps-queue-resource"],"operationId":"purgeQueue","parameters":[{"name":"queueName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PurgeQueueResult"}}}}}}},"/prisoner-index/switch-index":{"put":{"tags":["prisoner-index-resource"],"summary":"Switch index without rebuilding","description":"current index will be switched both indexed have to be complete, requires PRISONER_INDEX role","operationId":"switchIndex","responses":{"409":{"description":"Unable to switch indexes - one is marked as in progress or in error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexStatus"}}}}}}},"/prisoner-index/queue-housekeeping":{"put":{"tags":["prisoner-index-resource"],"summary":"Performs automated housekeeping tasks such as marking builds completed","description":"This is an internal service which isn't exposed to the outside world. It is called from a Kubernetes CronJob named `index-housekeeping-cronjob`","operationId":"indexQueueHousekeeping","responses":{"409":{"description":"Unable to marked index complete as it is in error"}}}},"/prisoner-index/mark-complete":{"put":{"tags":["prisoner-index-resource"],"summary":"Mark index as complete and swap","description":"Swaps to the newly built index, requires PRISONER_INDEX role","operationId":"indexComplete","parameters":[{"name":"ignoreThreshold","in":"query","required":false,"schema":{"type":"boolean"}}],"responses":{"409":{"description":"Unable to marked index complete as it is in error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexStatus"}}}}}}},"/prisoner-index/index/prisoner/{prisonerNumber}":{"put":{"tags":["prisoner-index-resource"],"summary":"Index/Refresh Data for Prisoner with specified prisoner Number","description":"Requires PRISONER_INDEX role","operationId":"indexPrisoner","parameters":[{"name":"prisonerNumber","in":"path","required":true,"schema":{"pattern":"[a-zA-Z][0-9]{4}[a-zA-Z]{2}","type":"string"},"example":"A1234AA"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Prisoner"}}}}}}},"/prisoner-index/cancel-index":{"put":{"tags":["prisoner-index-resource"],"summary":"Cancels a building index.","description":"Only cancels if indexing is in progress, requires PRISONER_INDEX role","operationId":"cancelIndex","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexStatus"}}}}}}},"/prisoner-index/build-index":{"put":{"tags":["prisoner-index-resource"],"summary":"Start building a new index.","description":"Old index is left untouched and will be maintained whilst new index is built, requires PRISONER_INDEX role","operationId":"buildIndex","responses":{"409":{"description":"Unable to build index - it is marked as in progress or in error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexStatus"}}}}}}},"/restricted-patient-search/match-restricted-patients":{"post":{"tags":["restricted-patient-search-resource"],"summary":"Match prisoners by criteria","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByCriteria","parameters":[{"name":"page","in":"query","description":"Zero-based page index (0..N)","required":false,"schema":{"minimum":0,"type":"integer","default":0}},{"name":"size","in":"query","description":"The size of the page to be returned","required":false,"schema":{"minimum":1,"type":"integer","default":10}},{"name":"sort","in":"query","description":"Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.","required":false,"schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestrictedPatientSearchCriteria"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PagePrisoner"}}}}}}},"/prisoner-search/release-date-by-prison":{"post":{"tags":["prisoner-search-resource"],"summary":"Match prisoners who have a release date within a range, and optionally by prison","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByReleaseDateAndPrison","parameters":[{"name":"page","in":"query","description":"Zero-based page index (0..N)","required":false,"schema":{"minimum":0,"type":"integer","default":0}},{"name":"size","in":"query","description":"The size of the page to be returned","required":false,"schema":{"minimum":1,"type":"integer","default":10}},{"name":"sort","in":"query","description":"Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.","required":false,"schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReleaseDateSearch"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PagePrisoner"}}}}}}},"/prisoner-search/prisoner-numbers":{"post":{"tags":["prisoner-search-resource"],"summary":"Match prisoners by a list of prisoner numbers","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByNumbers","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrisonerNumbers"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}}}}}}}},"/prisoner-search/match":{"post":{"tags":["prisoner-search-resource"],"summary":"Match prisoners by criteria, to search across a list of specific prisons use /match-prisoners","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByCriteria_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrisonSearch"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}}}}}},"deprecated":true}},"/prisoner-search/match-prisoners":{"post":{"tags":["prisoner-search-resource"],"summary":"Match prisoners by criteria","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByCriteria_2","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchCriteria"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}}}}}}}},"/prisoner-search/booking-ids":{"post":{"tags":["prisoner-search-resource"],"summary":"Match prisoners by a list of booking ids","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByIds","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingIds"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}}}}}}}},"/prisoner-detail":{"post":{"tags":["prisoner-detail-resource"],"summary":"Find prisoners by exact or wildcard terms for specified fields and return a paginated result set","description":"\n      Search terms and identifiers can be provided in either or mixed case and are converted to the appropriate case.\n      This endpoint will find both exact values (full term matched) or wildcards supporting the '*' and '?' symbols.\n      The '*' symbol will match any number of characters e.g. firstName='J*' will match 'John', 'Jane', and 'James'.  \n      The '?' symbol will match any letter substituted at that position. e.g. firstName='t?ny' will match 'Tony' and 'Tiny'\n      Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role.\n      ","operationId":"prisonerDetailSearch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrisonerDetailRequest"}}},"required":true},"responses":{"200":{"description":"Search successfully performed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrisonerDetailResponse"}}}},"400":{"description":"Incorrect information provided to perform prisoner match","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized to access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"403":{"description":"Incorrect permissions to search for prisoner data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"security":[{"ROLE_GLOBAL_SEARCH":[]},{"ROLE_PRISONER_SEARCH":[]}]}},"/match-prisoners":{"post":{"tags":["prisoner-match-resource"],"summary":"Match for an prisoner in Prisoner ElasticSearch. It will return the best group of matching prisoners based on the request","description":"Specify the request criteria to match against, role required is ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH","operationId":"matchPrisoners","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MatchRequest"}}},"required":true},"responses":{"200":{"description":"Search successfully performed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrisonerMatches"}}}},"400":{"description":"Incorrect information provided to perform prisoner match","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized to access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"403":{"description":"Incorrect permissions to search for prisoner data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"security":[{"ROLE_GLOBAL_SEARCH":[]},{"ROLE_PRISONER_SEARCH":[]}]}},"/keyword":{"post":{"tags":["prisoner-keyword-resource"],"summary":"Search for prisoners by keyword or identifiers within a list of prisons and return a paginated result set","description":" \n      Words and identifiers can be provided in either or mixed case and will be matched against all indexed text and keyword fields.\n      Identifiers within the [and, or, not, exact] terms are detected and converted to the appropriate case.\n      Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role.\n      ","operationId":"keywordSearch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeywordRequest"}}},"required":true},"responses":{"200":{"description":"Search successfully performed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeywordResponse"}}}},"400":{"description":"Incorrect information provided to perform prisoner match","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized to access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"403":{"description":"Incorrect permissions to search for prisoner data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"security":[{"ROLE_GLOBAL_SEARCH":[]},{"ROLE_PRISONER_SEARCH":[]}]}},"/global-search":{"post":{"tags":["global-search-resource"],"summary":"Match prisoners by criteria","description":"Requires ROLE_GLOBAL_SEARCH role or ROLE_PRISONER_SEARCH role","operationId":"globalFindByCriteria","parameters":[{"name":"page","in":"query","description":"Zero-based page index (0..N)","required":false,"schema":{"minimum":0,"type":"integer","default":0}},{"name":"size","in":"query","description":"The size of the page to be returned","required":false,"schema":{"minimum":1,"type":"integer","default":10}},{"name":"sort","in":"query","description":"Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.","required":false,"schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GlobalSearchCriteria"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PagePrisoner"}}}}}}},"/synthetic-monitor":{"get":{"tags":["global-search-resource"],"operationId":"syntheticMonitor","responses":{"200":{"description":"OK"}}}},"/queue-admin/get-dlq-messages/{dlqName}":{"get":{"tags":["hmpps-queue-resource"],"operationId":"getDlqMessages","parameters":[{"name":"dlqName","in":"path","required":true,"schema":{"type":"string"}},{"name":"maxMessages","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":100}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetDlqResult"}}}}}}},"/prisoner/{id}":{"get":{"tags":["global-search-resource"],"summary":"Get prisoner by Id","description":"Requires ROLE_PRISONER_SEARCH or ROLE_VIEW_PRISONER_DATA role","operationId":"findByPrison","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Prisoner"}}}}},"security":[{"ROLE_VIEW_PRISONER_DATA":[]},{"ROLE_PRISONER_SEARCH":[]}]}},"/prisoner-search/prison/{prisonId}":{"get":{"tags":["prisoner-search-resource"],"summary":"Match prisoners by prison, or if a restricted patient supported by a POM","description":"Requires ROLE_GLOBAL_SEARCH or ROLE_PRISONER_SEARCH role","operationId":"findByPrison_1","parameters":[{"name":"prisonId","in":"path","required":true,"schema":{"type":"string"}},{"name":"include-restricted-patients","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"page","in":"query","description":"Zero-based page index (0..N)","required":false,"schema":{"minimum":0,"type":"integer","default":0}},{"name":"size","in":"query","description":"The size of the page to be returned","required":false,"schema":{"minimum":1,"type":"integer","default":10}},{"name":"sort","in":"query","description":"Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.","required":false,"schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PagePrisoner"}}}}}}}},"components":{"schemas":{"Message":{"type":"object","properties":{"messageId":{"type":"string"},"receiptHandle":{"type":"string"},"body":{"type":"string"},"attributes":{"type":"object","additionalProperties":{"type":"string"}},"messageAttributes":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/MessageAttributeValue"}},"md5OfBody":{"type":"string"},"md5OfMessageAttributes":{"type":"string"}}},"MessageAttributeValue":{"type":"object","properties":{"stringValue":{"type":"string"},"binaryValue":{"type":"object","properties":{"short":{"type":"integer","format":"int32"},"char":{"type":"string"},"int":{"type":"integer","format":"int32"},"long":{"type":"integer","format":"int64"},"float":{"type":"number","format":"float"},"double":{"type":"number","format":"double"},"direct":{"type":"boolean"},"readOnly":{"type":"boolean"}}},"stringListValues":{"type":"array","items":{"type":"string"}},"binaryListValues":{"type":"array","items":{"type":"object","properties":{"short":{"type":"integer","format":"int32"},"char":{"type":"string"},"int":{"type":"integer","format":"int32"},"long":{"type":"integer","format":"int64"},"float":{"type":"number","format":"float"},"double":{"type":"number","format":"double"},"direct":{"type":"boolean"},"readOnly":{"type":"boolean"}}}},"dataType":{"type":"string"}}},"RetryDlqResult":{"required":["messages","messagesFoundCount"],"type":"object","properties":{"messagesFoundCount":{"type":"integer","format":"int32"},"messages":{"type":"array","items":{"$ref":"#/components/schemas/Message"}}}},"PurgeQueueResult":{"required":["messagesFoundCount"],"type":"object","properties":{"messagesFoundCount":{"type":"integer","format":"int32"}}},"IndexStatus":{"required":["currentIndex","id","inError","inProgress"],"type":"object","properties":{"id":{"type":"string"},"currentIndex":{"type":"string","enum":["INDEX_A","INDEX_B"]},"startIndexTime":{"pattern":"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$","type":"string","example":"2021-07-05T10:35:17"},"endIndexTime":{"pattern":"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$","type":"string","example":"2021-07-05T10:35:17"},"inProgress":{"type":"boolean"},"inError":{"type":"boolean"}}},"Prisoner":{"required":["restrictedPatient"],"type":"object","properties":{"prisonerNumber":{"type":"string","description":"Prisoner Number","example":"A1234AA"},"pncNumber":{"type":"string","description":"PNC Number","example":"12/394773H"},"pncNumberCanonicalShort":{"type":"string","description":"PNC Number","example":"12/394773H"},"pncNumberCanonicalLong":{"type":"string","description":"PNC Number","example":"2012/394773H"},"croNumber":{"type":"string","description":"CRO Number","example":"29906/12J"},"bookingId":{"type":"string","description":"Booking No.","example":"0001200924"},"bookNumber":{"type":"string","description":"Book Number","example":"38412A"},"firstName":{"type":"string","description":"First Name","example":"Robert"},"middleNames":{"type":"string","description":"Middle Names","example":"John James"},"lastName":{"type":"string","description":"Last name","example":"Larsen"},"dateOfBirth":{"type":"string","description":"Date of Birth","format":"date","example":"1975-04-02"},"gender":{"type":"string","description":"Gender","example":"Female"},"ethnicity":{"type":"string","description":"Ethnicity","example":"White: Eng./Welsh/Scot./N.Irish/British"},"youthOffender":{"type":"boolean","description":"Youth Offender?","example":true},"maritalStatus":{"type":"string","description":"Marital Status","example":"Widowed"},"religion":{"type":"string","description":"Religion","example":"Church of England (Anglican)"},"nationality":{"type":"string","description":"Nationality","example":"Egyptian"},"status":{"type":"string","description":"Status of the prisoner","example":"ACTIVE IN"},"lastMovementTypeCode":{"type":"string","description":"Last Movement Type Code of prisoner","example":"CRT"},"lastMovementReasonCode":{"type":"string","description":"Last Movement Reason of prisoner","example":"CA"},"inOutStatus":{"type":"string","description":"In/Out Status","example":"IN","enum":["IN","OUT"]},"prisonId":{"type":"string","description":"Prison ID","example":"MDI"},"prisonName":{"type":"string","description":"Prison Name","example":"HMP Leeds"},"cellLocation":{"type":"string","description":"In prison cell location","example":"A-1-002"},"aliases":{"type":"array","description":"Aliases Names and Details","items":{"$ref":"#/components/schemas/PrisonerAlias"}},"alerts":{"type":"array","description":"Alerts","items":{"$ref":"#/components/schemas/PrisonerAlert"}},"csra":{"type":"string","description":"Cell Sharing Risk Assessment","example":"HIGH"},"category":{"type":"string","description":"Prisoner Category","example":"C"},"legalStatus":{"type":"string","description":"Legal Status","example":"SENTENCED","enum":["RECALL","DEAD","INDETERMINATE_SENTENCE","SENTENCED","CONVICTED_UNSENTENCED","CIVIL_PRISONER","IMMIGRATION_DETAINEE","REMAND","UNKNOWN","OTHER"]},"imprisonmentStatus":{"type":"string","description":"The prisoner's imprisonment status code.","example":"LIFE"},"imprisonmentStatusDescription":{"type":"string","description":"The prisoner's imprisonment status description.","example":"Serving Life Imprisonment"},"mostSeriousOffence":{"type":"string","description":"Most serious offence for this sentence","example":"Robbery"},"recall":{"type":"boolean","description":"Indicates that the offender has been recalled","example":false},"indeterminateSentence":{"type":"boolean","description":"Indicates the the offender has an indeterminate sentence","example":true},"sentenceStartDate":{"type":"string","description":"Start Date for this sentence","format":"date","example":"2020-04-03"},"releaseDate":{"type":"string","description":"Actual of most likely Release Date","format":"date","example":"2023-05-02"},"confirmedReleaseDate":{"type":"string","description":"Release Date Confirmed","format":"date","example":"2023-05-01"},"sentenceExpiryDate":{"type":"string","description":"Sentence Expiry Date","format":"date","example":"2023-05-01"},"licenceExpiryDate":{"type":"string","description":"Licence Expiry Date","format":"date","example":"2023-05-01"},"homeDetentionCurfewEligibilityDate":{"type":"string","description":"HDC Eligibility Date","format":"date","example":"2023-05-01"},"homeDetentionCurfewActualDate":{"type":"string","description":"HDC Actual Date","format":"date","example":"2023-05-01"},"homeDetentionCurfewEndDate":{"type":"string","description":"HDC End Date","format":"date","example":"2023-05-02"},"topupSupervisionStartDate":{"type":"string","description":"Top-up supervision start date","format":"date","example":"2023-04-29"},"topupSupervisionExpiryDate":{"type":"string","description":"Top-up supervision expiry date","format":"date","example":"2023-05-01"},"additionalDaysAwarded":{"type":"integer","description":"Days added to sentence term due to adjustments.","format":"int32","example":10},"nonDtoReleaseDate":{"type":"string","description":"Release date for Non determinant sentence (if applicable). This will be based on one of ARD, CRD, NPD or PRRD.","format":"date","example":"2023-05-01"},"nonDtoReleaseDateType":{"type":"string","description":"Indicates which type of non-DTO release date is the effective release date. One of 'ARD’, 'CRD’, ‘NPD’ or 'PRRD’.","example":"ARD","enum":["ARD","CRD","NPD","PRRD"]},"receptionDate":{"type":"string","description":"Date prisoner was received into the prison","format":"date","example":"2023-05-01"},"paroleEligibilityDate":{"type":"string","description":"Parole  Eligibility Date","format":"date","example":"2023-05-01"},"automaticReleaseDate":{"type":"string","description":"Automatic Release Date. If automaticReleaseOverrideDate is available then it will be set as automaticReleaseDate","format":"date","example":"2023-05-01"},"postRecallReleaseDate":{"type":"string","description":"Post Recall Release Date. if postRecallReleaseOverrideDate is available then it will be set as postRecallReleaseDate","format":"date","example":"2023-05-01"},"conditionalReleaseDate":{"type":"string","description":"Conditional Release Date. If conditionalReleaseOverrideDate is available then it will be set as conditionalReleaseDate","format":"date","example":"2023-05-01"},"actualParoleDate":{"type":"string","description":"Actual Parole Date","format":"date","example":"2023-05-01"},"tariffDate":{"type":"string","description":"Tariff Date","format":"date","example":"2023-05-01"},"locationDescription":{"type":"string","description":"current prison or outside with last movement information.","example":"Outside - released from Leeds"},"restrictedPatient":{"type":"boolean","description":"Indicates a restricted patient","example":true},"supportingPrisonId":{"type":"string","description":"Supporting prison ID for POM","example":"LEI"},"dischargedHospitalId":{"type":"string","description":"Which hospital the offender has been discharged to","example":"HAZLWD"},"dischargedHospitalDescription":{"type":"string","description":"Hospital name to which the offender was discharged","example":"Hazelwood House"},"dischargeDate":{"type":"string","description":"Date of discharge","format":"date","example":"2020-05-01"},"dischargeDetails":{"type":"string","description":"Any additional discharge details","example":"Psychiatric Hospital Discharge to Hazelwood House"}}},"PrisonerAlert":{"required":["active","alertCode","alertType","expired"],"type":"object","properties":{"alertType":{"type":"string","description":"Alert Type","example":"H"},"alertCode":{"type":"string","description":"Alert Code","example":"HA"},"active":{"type":"boolean","description":"Active","example":true},"expired":{"type":"boolean","description":"Expired","example":true}},"description":"Alerts"},"PrisonerAlias":{"required":["dateOfBirth","firstName","lastName"],"type":"object","properties":{"firstName":{"type":"string","description":"First Name","example":"Robert"},"middleNames":{"type":"string","description":"Middle names","example":"Trevor"},"lastName":{"type":"string","description":"Last name","example":"Lorsen"},"dateOfBirth":{"type":"string","description":"Date of birth","format":"date","example":"1975-04-02"},"gender":{"type":"string","description":"Gender","example":"Male"},"ethnicity":{"type":"string","description":"Ethnicity","example":"White : Irish"}},"description":"Aliases Names and Details"},"RestrictedPatientSearchCriteria":{"type":"object","properties":{"prisonerIdentifier":{"type":"string","description":"Prisoner identifier, one of prisoner number, book number, booking ID or PNC","example":"A1234AA,"},"firstName":{"type":"string","description":"First Name","example":"John"},"lastName":{"type":"string","description":"Last Name","example":"Smith"},"supportingPrisonIds":{"type":"array","description":"List of supporting Prison Ids to restrict the search by. Unrestricted if not supplied or null","example":["MDI"],"items":{"type":"string","description":"List of supporting Prison Ids to restrict the search by. Unrestricted if not supplied or null","example":"[\"MDI\"]"}}},"description":"Search Criteria for Prisoner Search"},"PagePrisoner":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/Sort"},"last":{"type":"boolean"},"first":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/Sort"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"},"pageNumber":{"type":"integer","format":"int32"}}},"Sort":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"ReleaseDateSearch":{"required":["latestReleaseDate"],"type":"object","properties":{"earliestReleaseDate":{"type":"string","description":"The lower bound for the release date range of which to search - defaults to today if not provided","format":"date","example":"2022-04-20"},"latestReleaseDate":{"type":"string","description":"The upper bound for the release date range of which to search. A required field.","format":"date","example":"2022-05-20"},"prisonIds":{"uniqueItems":true,"type":"array","description":"List of Prison Ids (can include OUT and TRN) to restrict the search by. Unrestricted if not supplied or null","example":["MDI"],"items":{"type":"string","description":"List of Prison Ids (can include OUT and TRN) to restrict the search by. Unrestricted if not supplied or null","example":"[\"MDI\"]"}}},"description":"Search Criteria for Release Date Search"},"PrisonerNumbers":{"required":["prisonerNumbers"],"type":"object","properties":{"prisonerNumbers":{"maxItems":1000,"minItems":1,"type":"array","description":"List of prisoner numbers to search by","example":["A1234AA"],"items":{"type":"string","description":"List of prisoner numbers to search by","example":"[\"A1234AA\"]"}}}},"PrisonSearch":{"required":["includeAliases"],"type":"object","properties":{"prisonerIdentifier":{"type":"string","description":"Prisoner identifier, one of prisoner number, book number, booking ID or PNC","example":"A1234AA,"},"firstName":{"type":"string","description":"First Name","example":"John"},"lastName":{"type":"string","description":"Last Name","example":"Smith"},"prisonId":{"type":"string","description":"Prison Id, Prison Id or OUT or TRN","example":"MDI"},"includeAliases":{"type":"boolean","description":"Include aliases in search","example":false,"default":false}},"description":"Search Criteria for Prisoner Search"},"SearchCriteria":{"required":["includeAliases"],"type":"object","properties":{"prisonerIdentifier":{"type":"string","description":"Prisoner identifier, one of prisoner number, book number, booking ID or PNC","example":"A1234AA,"},"firstName":{"type":"string","description":"First Name","example":"John"},"lastName":{"type":"string","description":"Last Name","example":"Smith"},"prisonIds":{"type":"array","description":"List of Prison Ids (can include OUT and TRN) to restrict the search by. Unrestricted if not supplied or null","example":["MDI"],"items":{"type":"string","description":"List of Prison Ids (can include OUT and TRN) to restrict the search by. Unrestricted if not supplied or null","example":"[\"MDI\"]"}},"includeAliases":{"type":"boolean","description":"Include aliases in search","example":false,"default":false}},"description":"Search Criteria for Prisoner Search"},"BookingIds":{"required":["bookingIds"],"type":"object","properties":{"bookingIds":{"maxItems":1000,"minItems":1,"type":"array","description":"List of bookingIds to search by","example":[1,2,3],"items":{"type":"integer","description":"List of bookingIds to search by","format":"int64"}}}},"PaginationRequest":{"required":["page","size"],"type":"object","properties":{"page":{"type":"integer","description":"The page number required in the paginated response","format":"int32","example":0},"size":{"type":"integer","description":"The number of results to return for paginated response","format":"int32","example":10}},"description":"Pagination options. Will default to the first page if omitted."},"PrisonerDetailRequest":{"required":["includeAliases","pagination"],"type":"object","properties":{"firstName":{"type":"string","description":"Prisoner first name","example":"john"},"lastName":{"type":"string","description":"Prisoner last name","example":"smith"},"nomsNumber":{"type":"string","description":"Prisoner number (aka. offenderId, nomisId)","example":"A1234AA"},"pncNumber":{"type":"string","description":"Police National Computer (PNC) number","example":"2018/0123456X"},"croNumber":{"type":"string","description":"Criminal Records Office (CRO) number","example":"SF80/655108T"},"fuzzyMatch":{"type":"boolean","description":"Fuzzy matching. Allow a one character difference in spelling in word lengths below five and two differences above.","example":false},"prisonIds":{"type":"array","description":"List of prison codes to filter results by","example":"['LEI', 'MDI']","items":{"type":"string","description":"List of prison codes to filter results by","example":"['LEI', 'MDI']"}},"includeAliases":{"type":"boolean","description":"Include aliases in search","example":true,"default":true},"pagination":{"$ref":"#/components/schemas/PaginationRequest"}}},"PrisonerDetailResponse":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/Sort"},"last":{"type":"boolean"},"first":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"ErrorResponse":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","description":"Status of Error Code","format":"int32","example":400},"developerMessage":{"type":"string","description":"Developer Information message","example":"System is down"},"errorCode":{"type":"integer","description":"Internal Error Code","format":"int32","example":20012},"userMessage":{"type":"string","description":"Error message information","example":"Prisoner Not Found"},"moreInfo":{"type":"string","description":"Additional information about the error","example":"Hard disk failure"}}},"MatchRequest":{"required":["lastName"],"type":"object","properties":{"firstName":{"type":"string","description":"Prisoner first name","example":"john"},"lastName":{"type":"string","description":"Prisoner last Name","example":"smith"},"dateOfBirth":{"type":"string","description":"Prisoner date of birth","format":"date","example":"1996-02-10"},"pncNumber":{"type":"string","description":"Police National Computer (PNC) number","example":"2018/0123456X"},"croNumber":{"type":"string","description":"Criminal Records Office (CRO) number","example":"SF80/655108T"},"nomsNumber":{"type":"string","description":"The Prisoner NOMIS Id (aka prison number/offender no in DPS)","example":"A1234AB"}}},"PrisonerMatch":{"required":["prisoner"],"type":"object","properties":{"prisoner":{"$ref":"#/components/schemas/Prisoner"}},"description":"List of prisoners that share the same possibility of being the match"},"PrisonerMatches":{"required":["matchedBy","matches"],"type":"object","properties":{"matches":{"type":"array","description":"List of prisoners that share the same possibility of being the match","items":{"$ref":"#/components/schemas/PrisonerMatch"}},"matchedBy":{"type":"string","description":"How the match was performed","enum":["ALL_SUPPLIED","ALL_SUPPLIED_ALIAS","HMPPS_KEY","EXTERNAL_KEY","NAME","PARTIAL_NAME","PARTIAL_NAME_DOB_LENIENT","NOTHING"]}}},"KeywordRequest":{"required":["pagination"],"type":"object","properties":{"orWords":{"type":"string","description":"Match where any of the keywords are present in any text field","example":"smith james john"},"andWords":{"type":"string","description":"Match where all keywords are present in any text field","example":"smith james"},"notWords":{"type":"string","description":"Filter results where any of these words are present in any text field","example":"jonas"},"exactPhrase":{"type":"string","description":"Match only prisoners where the full phrase is present in any text field","example":"John Smith"},"fuzzyMatch":{"type":"boolean","description":"Fuzzy matching. Allow a one character difference in spelling in word lengths below five and two differences above.","example":false},"prisonIds":{"type":"array","description":"List of prison codes to filter results","example":["LEI","MDI"],"items":{"type":"string","description":"List of prison codes to filter results","example":"[\"LEI\",\"MDI\"]"}},"pagination":{"$ref":"#/components/schemas/PaginationRequest"}}},"KeywordResponse":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/Prisoner"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/Sort"},"last":{"type":"boolean"},"first":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"GlobalSearchCriteria":{"required":["includeAliases"],"type":"object","properties":{"prisonerIdentifier":{"type":"string","description":"Prisoner identifier, one of prisoner number, book number, booking ID or PNC","example":"A1234AA"},"firstName":{"type":"string","description":"First Name","example":"John"},"lastName":{"type":"string","description":"Last Name","example":"Smith"},"gender":{"type":"string","description":"Gender, F - Female, M - Male, NK - Not Known / Not Recorded or NS - Not Specified (Indeterminate)","example":"M","enum":["M","F","NK","NS","ALL"]},"location":{"type":"string","description":"Location, All or Inside or Outside","example":"IN"},"dateOfBirth":{"type":"string","description":"Date of birth","format":"date","example":"1970-02-28"},"includeAliases":{"type":"boolean","description":"Include aliases in search","example":false,"default":false}},"description":"Search Criteria for Global Prisoner Search"},"DlqMessage":{"required":["body","messageId"],"type":"object","properties":{"body":{"type":"object","additionalProperties":{"type":"object"}},"messageId":{"type":"string"}}},"GetDlqResult":{"required":["messages","messagesFoundCount","messagesReturnedCount"],"type":"object","properties":{"messagesFoundCount":{"type":"integer","format":"int32"},"messagesReturnedCount":{"type":"integer","format":"int32"},"messages":{"type":"array","items":{"$ref":"#/components/schemas/DlqMessage"}}}}},"securitySchemes":{"bearer-jwt":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}